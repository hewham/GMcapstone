<div class="main">

  <div style="text-align:center">
    <button class="back-button" (click)="clickedBack()" *ngIf="showTable">
      Back to Uploads
    </button>
    <h1>
      GM Capstone
    </h1>
    <button class="sort-button" (click)="sortByDifference()" *ngIf="showTable && !sorted">
      Sort By Difference
    </button>
    <button class="sort-button" (click)="unSortByDifference()" *ngIf="showTable && sorted">
      UnSort
    </button>
  </div>







  <div style="text-align:center" *ngIf="!showTable && !loadingFlag">
    <img class="gm-logo" width="300" alt="GM Logo" src="assets/gmlogo.png">

    <br />
    <br />
    DOE FuelRate: $<input type="number" id="fuelrate" class="fuel_input"/>
    <br />


    <div class="grid-container">
      <div class="grid-item">
        Upload Parts CSV File Here
        <br />
        <input id="partsFile" type="file" class="file_input"/>
      </div>
      <div class="grid-item">
        Upload Routes CSV File Here
        <br />
        <input id="routesFile" type="file" class="file_input"/>
      </div>
      <div class="grid-item">
        Upload Containers CSV File Here
        <br />
        <input id="containersFile" type="file" class="file_input"/>
      </div>
    </div>

    <br />
    <button class="ok-button" (click)="clickedOK()">
      <u>GO</u>
    </button>
    <br />
    <button class="ok-button" (click)="clickedOKNoUpload()">
      <u>GO (no upload)</u>
    </button>
    <!-- <br />
    <button class="ok-button" (click)="clickedDemo()">
      Demo Table...
    </button> -->
    <br />
    <button class="ok-button" (click)="test()">
      test code
    </button>

  </div>



  <div *ngIf="loadingFlag">
    <img class="loading" src="assets/loading.gif"/>
  </div>



  <div *ngIf="showTable && !demo">

    <p>Cost savings: <span *ngIf="totals[0] > 0" style="color:green">{{totals[0] | currency}}</span><span *ngIf="totals[0] <= 0" style="color:red">{{totals[0] | currency}}</span></p>
    <p>Cost savings (2nd best): <span *ngIf="totals[1] > 0" style="color:green">{{totals[1] | currency}}</span><span *ngIf="totals[1] <= 0" style="color:red">{{totals[1] | currency}}</span></p>
    <p>Cost savings (3rd best): <span *ngIf="totals[2] > 0" style="color:green">{{totals[2] | currency}}</span><span *ngIf="totals[2] <= 0" style="color:red">{{totals[2] | currency}}</span></p>

    <table>
      <tr> <th class="zeroth">Ref #</th> <th class="zeroth">Route ID</th> <th class="zeroth">Current Cost</th> <th class="zeroth">Current $ Frequency</th> <th class="firstth">Lowest Cost</th> <th class="firstth">Lowest $ Frequency</th> <th class="firstth">Cost Difference</th> <th class="secondth">2nd Lowest Cost</th>
        <th class="secondth">2nd Lowest $ Frequency</th> <th class="secondth">2nd Cost Difference</th> <th class="thirdth">3rd Lowest Cost</th> <th class="thirdth">3rd Lowest $ Frequency</th> <th class="thirdth">3rd Cost Difference</th></tr>

      <tr *ngFor="let row of outputMatrix, let i = index">
        <td>{{i+1}}</td>
        <td>{{row[0]}}</td>
        <td>{{row[1] | currency:0}}</td>
        <td>{{row[2]}}</td>
        <td>{{row[3] | currency}}</td>
        <td>{{row[4]}}</td>
        <td>
          <div *ngIf="row[3] < row[1]" style="color:green">
            {{row[5] | currency}}
          </div>
          <div *ngIf="row[3] > row[1]" style="color:red">
            {{row[5] | currency}}
          </div>
          <div *ngIf="row[3] == row[1]" style="color:grey">
            $0
          </div>
        </td>

        <td>{{row[6] | currency}}</td>
        <td>{{row[7]}}</td>
        <td>
          <div *ngIf="row[6] < row[1]" style="color:green">
            {{row[8] | currency}}
          </div>
          <div *ngIf="row[6] > row[1]" style="color:red">
            {{row[8] | currency}}
          </div>
          <div *ngIf="row[6] == row[1]" style="color:grey">
            $0
          </div>
        </td>

        <td>{{row[9] | currency}}</td>
        <td>{{row[10]}}</td>
        <td>
          <div *ngIf="row[9] < row[1]" style="color:green">
            {{row[11] | currency}}
          </div>
          <div *ngIf="row[9] > row[1]" style="color:red">
            {{row[11] | currency}}
          </div>
          <div *ngIf="row[9] == row[1]" style="color:grey">
            $0
          </div>
        </td>
      </tr>

    </table>
  </div>






  <div *ngIf="showTable && demo">
    <table>
      <tr> <th>Supplier</th> <th>Best Frequency</th> <th>Best Cost</th> <th>Originial Frequency</th> <th>Original Cost</th> <th> Cost Difference</th> </tr>

      <tr><td>detroit</td><td>2456.3</td><td>4324</td><td>8494</td></tr>

      <tr><td>ypsi</td><td>1234.23</td><td>5356.34</td><td>7549.98</td></tr>

      <tr><td>ann arbor</td><td>4237.5</td><td>8599.2</td><td>5574.3</td></tr>
    </table>

  </div>


</div>
